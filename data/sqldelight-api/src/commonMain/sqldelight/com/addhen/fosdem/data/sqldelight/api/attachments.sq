CREATE TABLE IF NOT EXISTS `attachments`(
  `id` INTEGER PRIMARY KEY,
  `event_id` INTEGER,
  `type` TEXT,
  `url` TEXT,
  FOREIGN KEY (event_id) REFERENCES events(id)
);

-- indices

CREATE UNIQUE INDEX IF NOT EXISTS `index_attachments_event_id` ON `attachments` (`event_id`);

-- queries

insert:
INSERT OR IGNORE INTO attachments (
    `id`,
    `event_id`,
    `type`,
    `url`
) VALUES (
    nullif(:id, 0),
    :event_id,
    :type,
    :url
);
